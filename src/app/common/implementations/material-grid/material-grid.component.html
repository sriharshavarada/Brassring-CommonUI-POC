<!-- Material Grid: Angular Material mat-table Implementation -->
<div class="material-grid-wrapper">
    <!-- Title -->
    <div class="grid-title" *ngIf="config?.title">
        <h3>{{ config.title }}</h3>
        <span class="badge">Material</span>
    </div>

    <!-- Mat Table -->
    <div class="table-container">
        <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z0">

            <!-- Dynamic column definitions -->
            <ng-container *ngFor="let col of columns" [matColumnDef]="col.field">
                <th mat-header-cell *matHeaderCellDef
                    [mat-sort-header]="col.sortable && config?.sorting ? col.field : ''"
                    [disabled]="!col.sortable || !config?.sorting">
                    {{ col.header }}
                </th>
                <td mat-cell *matCellDef="let row">
                    {{ row[col.field] }}
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <!-- Empty state -->
            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell empty-message" [attr.colspan]="displayedColumns.length">
                    {{ config?.emptyMessage || 'No data available' }}
                </td>
            </tr>
        </table>
    </div>

    <!-- Paginator -->
    <mat-paginator *ngIf="config?.pagination" [pageSize]="config?.pageSize || 10" [pageSizeOptions]="[5, 10, 25, 50]"
        showFirstLastButtons>
    </mat-paginator>
</div>